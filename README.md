# KIF Viewer (branch)

KIF（将棋棋譜）をブラウザ上で再生できる、**分岐（変化）対応**の簡易ビューアです。  
GitHub Pages で公開して **Notion に埋め込み**、スマホから閲覧する用途を想定しています。

## できること

- `.kif` / `.kifu` / `.txt` の読み込み（ファイル or 貼り付け）
- 盤面の再生（先頭/戻る/進む/末尾、スライダー、手順タップ移動）
- **分岐（変化：N手）** の選択
- 持ち駒表示（左：後手、右：先手）
- **「このラインをKIFコピー」**  
  - クリップボードが使える環境ならコピー  
  - 使えない環境（iOS / Notion埋め込み等）では、テキスト欄にKIFを出して選択状態にして手動コピーできるようにします

## 使い方（ローカル）

1. `index.html` をブラウザで開く
2. 左パネルから以下のどちらかで読み込み
   - ファイル選択（`.kif` 等）
   - テキスト貼り付け → 「貼付読込」
3. 盤面下のボタン / スライダー / 手順リストで再生
4. 分岐がある局面では「分岐」欄のプルダウンで変化を選択

## GitHub Pages で公開する

1. GitHub リポジトリ直下に `index.html` を置く
2. リポジトリの Settings → Pages
3. Source を `Deploy from a branch`、Branch を `main`（または `master`）+ `/ (root)` に設定
4. 公開URLが表示されます（例：`https://<user>.github.io/<repo>/`）

> `LICENSE` や `README.md` を同じリポジトリに置いても、Webページの読み込みには影響しません。  
> GitHub Pages は基本的に `index.html` を探して表示するだけです。

## Notion に埋め込む

- Notion で `/embed` を選び、GitHub Pages の URL を貼り付けて埋め込みます
- Notion 側の埋め込み枠が小さい場合は、埋め込みブロックのサイズをドラッグで広げてください

## KIF（分岐）の書式について

このビューアは主に以下を見て分岐を扱います：

- 本譜：通常の「手数----指手---------消費時間--」以降の手順
- 変化：`変化：N手` で始まるブロック

例：
- `変化：10手` のような行があると、**その手数（N手目）からの分岐**として扱います

※KIFの流派・生成元によって表記ゆれがあるため、完全対応ではなく「だいたい読める」方針です。

## よくあるハマり

### iOS の「ファイル」アプリ（iCloud）から .kif を選べない
環境によっては拡張子や MIME の扱いで選択不可になることがあります。  
その場合は、**KIFをテキスト欄に貼り付けて「貼付読込」**が確実です。

### Notion埋め込みでコピーが効かない
Notion埋め込みやiOSはクリップボードAPIが制限されることがあります。  
「このラインをKIFコピー」押下で **テキスト欄に出て選択状態**になるので、手動でコピーしてください。

## ライセンス

MIT License（`LICENSE` を参照）

---

## 開発メモ（任意）

- `index.html` 単体運用（外部ライブラリなし）
- GitHub Pages + Notion 埋め込み運用を想定
